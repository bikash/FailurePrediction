library(lattice)
library(plyr)
library(depmixS4)
library(TTR) # For downloading SP500 index
library(ggplot2)
library(reshape2)
library(xts)
library(data.table)
library(reshape)
#dir = "/Users/bikash/repos/FailurePrediction/R" # path for macbots1ok
dir = "/home/bikash/repos/FailurePrediction/R" # path in linux machine
setwd(dir)
##Plot number of observation Error Vs time
Data1 = read.table("file/error_25.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data1$day <- cut(as.POSIXlt( Data1$date,  origin="1970-01-01" ), breaks = "day")
getcount <- function(Df) { c(count = as.numeric(length(Df$ErrorType)),
obs = paste(Df$ErrorType, collapse=","))
}
ts1 <- ddply(Data1, .(day),getcount)
## Data from haisen 26
Data2 = read.table("file/error_26.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data2$day <- cut(as.POSIXlt( Data2$date,  origin="1970-01-01" ), breaks = "day")
ts2 <- ddply(Data2, .(day),getcount)
## Data from haisen 27
Data3 = read.table("file/error_27.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data3$day <- cut(as.POSIXlt( Data3$date,  origin="1970-01-01" ), breaks = "day")
ts3 <- ddply(Data3, .(day),getcount)
## Data from haisen 28
Data4 = read.table("file/error_28.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data4$day <- cut(as.POSIXlt( Data4$date,  origin="1970-01-01" ), breaks = "day")
ts4 <- ddply(Data4, .(day),getcount)
## Data from haisen 29
Data5 = read.table("file/error_29.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data5$day <- cut(as.POSIXlt( Data5$date,  origin="1970-01-01" ), breaks = "day")
ts5 <- ddply(Data5, .(day),getcount)
## d data from haisen22
Data6 = read.table("file/error_22.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data6$day <- cut(as.POSIXlt( Data6$date,  origin="1970-01-01" ), breaks = "day")
ts6 <- ddply(Data6, .(day),getcount)
## d data from haisen20
Data7 = read.table("file/error_20.txt",
sep=";",
col.names=c("date",  "status", "ErrorType", "Node"),
fill=FALSE,
strip.white=TRUE)
Data7$day <- cut(as.POSIXlt( Data7$date,  origin="1970-01-01" ), breaks = "day")
ts7 <- ddply(Data7, .(day),getcount)
#tseq <- seq(as.POSIXlt(df$date[1], origin="1970-01-01"), as.POSIXlt(df$date[len], origin="1970-01-01"), by="secs")
tseq <- seq(as.POSIXlt(1415724101, origin="1970-01-01"), as.POSIXlt(1417413321, origin="1970-01-01"), by="days")
tseq=as.numeric(as.POSIXct(tseq))
error = 7
data.nonerror <- data.frame(tseq,error)
## Merge all data
date = unlist(list(Data1$date, Data2$date, Data3$date, Data4$date, Data5$date,Data6$date, Data7$date, tseq))
error = unlist(list(Data1$ErrorType,Data2$ErrorType,Data3$ErrorType,Data4$ErrorType,Data5$ErrorType, Data6$ErrorType, Data7$ErrorType, data.nonerror$error))
#data.errorType <- data.frame(date[1:10000],error[1:10000])
data.errorType <- data.frame(date,error)
dt <- data.table(data.errorType )
dt$hour <- cut(as.POSIXlt( dt$date,  origin="1970-01-01" ), breaks = "hour")
getcount <- function(Df) { c(obs = paste( dt$date, Df$error, collapse=","))
}
dt$hour <- cut(as.POSIXlt( dt$date,  origin="1970-01-01" ), breaks = "hour")
getcount <- function(Df) { c(obs = paste( dt$date, Df$error, collapse=","))
}
ts1 <- ddply(dt, .(hour),getcount)
ts1
dt$hour <- cut(as.POSIXlt( dt$date,  origin="1970-01-01" ), breaks = "hour")
getcount <- function(Df) { c(obs = paste(Df$error, collapse=","))
}
ts1 <- ddply(dt, .(hour),getcount)
ts1
head(ts1)
s.POSIXlt(ts1$hour[1], origin="1970-01-01"), by="mins")
s.POSIXlt(ts1$hour[1], origin="1970-01-01")
as.POSIXlt(ts1$hour[1], origin="1970-01-01")
as.POSIXct(ts1$hour[1], origin="1970-01-01")
as.numeric(as.POSIXlt(ts1$hour[1], origin="1970-01-01"))
ts$date <-  as.numeric(as.POSIXlt(ts1$hour, origin="1970-01-01"))
as.numeric(as.POSIXlt(ts1$hour, origin="1970-01-01"))
ts
ts
ts1$date <-  as.numeric(as.POSIXlt(ts1$hour, origin="1970-01-01"))
ts1
dt$hour <- cut(as.POSIXlt( dt$date,  origin="1970-01-01" ), breaks = "hour")
getcount <- function(Df) { c(obs = paste(Df$error, collapse=","))
}
ts1 <- ddply(dt, .(hour),getcount)
ts1$date <-  as.numeric(as.POSIXlt(ts1$hour, origin="1970-01-01"))
head(ts1)
text = paste(ts1$date, ts1$obs, collapse=","))
text = paste(ts1$date, ts1$obs, collapse=",")
text
text = paste(ts1$date, ts1$obs, collapse=",","\n")
text
len <- length(ts1$date)
len
paste(ts1$date[1], ts1$obs[1], collapse=",")
paste(ts1$date[1], ts1$obs[1])
paste(ts1$date[1], ts1$obs[1])
paste(c(ts1$date[1], ts1$obs[1]), collapse=",")
file.out <- file('/Users/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
file.out <- file('/Users/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
file.out <- file('/home/bikash/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
file.out <- file('/home/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
len <- length(ts1$date)
for(i in 1:len) {
text = paste(c(ts1$date[i], ts1$obs[i]), collapse=",")
cat(text, sep = '',  file = file.out, fill = TRUE)
i++
}
len <- length(ts1$date)
for(i in 1:len) {
text = paste(c(ts1$date[i], ts1$obs[i]), collapse=",")
cat(text, sep = '',  file = file.out, fill = TRUE)
i = i+1
}
paste(c(ts1$date, ts1$obs), collapse=",")
##Create random error sequence sample(1:7,100, replace=T)
tseq <- seq(as.POSIXlt(948642137, origin="1970-01-01"), as.POSIXlt(1415724100, origin="1970-01-01"), by="mins")
errType = sample(1:7,7784700, replace=T)
data.nonerror <- data.frame(tseq,errType)
date = unlist(list(Data1raw$date, Data2$date, Data3$date, Data4$date, Data5$date,Data6$date, Data7$date, tseq))
error = unlist(list(Data1$ErrorType,Data2$ErrorType,Data3$ErrorType,Data4$ErrorType,Data5$ErrorType, Data6$ErrorType, Data7$ErrorType, data.nonerror$errType))
data.errorType <- data.frame(date,error)
tseq <- seq(as.POSIXlt(948642137, origin="1970-01-01"), as.POSIXlt(1415724100, origin="1970-01-01"), by="mins")
errType = sample(1:7,7784700, replace=T)
data.nonerror <- data.frame(tseq,errType)
date = unlist(list(Data1raw$date, Data2$date, Data3$date, Data4$date, Data5$date,Data6$date, Data7$date, tseq))
error = unlist(list(Data1$ErrorType,Data2$ErrorType,Data3$ErrorType,Data4$ErrorType,Data5$ErrorType, Data6$ErrorType, Data7$ErrorType, data.nonerror$errType))
date = unlist(list(Data1raw$date, Data2$date, Data3$date, Data4$date, Data5$date,Data6$date, Data7$date, tseq))
error = unlist(list(Data1$ErrorType,Data2$ErrorType,Data3$ErrorType,Data4$ErrorType,Data5$ErrorType, Data6$ErrorType, Data7$ErrorType, data.nonerror$errType))
date = unlist(list(Data1$date, Data2$date, Data3$date, Data4$date, Data5$date,Data6$date, Data7$date, tseq))
data.errorType <- data.frame(date,error)
dt <- data.table(data.errorType )
dt$hour <- cut(as.POSIXlt( dt$date,  origin="1970-01-01" ), breaks = "hour")
getcount <- function(Df) { c(obs = paste(Df$error, collapse="," ))
}
ts1 <- ddply(dt, .(hour),getcount)
ts1$date <-  as.numeric(as.POSIXlt(ts1$hour, origin="1970-01-01"))
len <- length(ts1$date)
for(i in 1:len) {
text = paste(c(ts1$date[i], ts1$obs[i]), collapse=",")
cat(text, sep = '',  file = file.out, fill = TRUE)
i = i+1
}
close(file.out)
file.out <- file('/home/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
len <- length(ts1$date)
len
ts1$obs
for(i in 1:len) {
text = paste(c(ts1$date[i], ts1$obs[i]), collapse=",")
cat(text, sep = '',  file = file.out, fill = TRUE)
i = i+1
}
close(file.out)
paste(c(ts1$date[1], ts1$obs[1]), collapse=",")
paste(c(ts1$date[100], ts1$obs[100]), collapse=",")
paste(c(ts1$date[1000], ts1$obs[1000]), collapse=",")
paste(c(ts1$date[10000], ts1$obs[10000]), collapse=",")
paste(c(ts1$date[100000], ts1$obs[100000]), collapse=",")
length(ts1$date)
length(ts1$obs)
file.out <- file('/home/bikash/repos/FailurePrediction/R/file/out.txt', 'wt')
len <- length(ts1$date)
for(i in 1:len) {
text = paste(c(ts1$date[i], ts1$obs[i]), collapse=",")
cat(text, sep = '',  file = file.out, fill = TRUE)
i = i+1
}
close(file.out)
